---
title: "From Data Science to Spatial Data Science"
author: "Edzer Pebesma, @edzerpebesma"
date: "10/16/2019, Spatial Data Science Conference, NY; https://edzer.gihub.io/sdsc19/"
output:
  ioslides_presentation:
    css: pres.css
    smaller: true
    widescreen: true
  slidy_presentation: default
  beamer_presentation: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(sf)
library(tidyverse)
nc = read_sf(system.file("gpkg/nc.gpkg", package="sf"))
pts = st_centroid(st_geometry(nc))
xy = st_coordinates(st_centroid(nc$geom))
```

## Data science: the table view

```{r, results='asis'}
cols = c(3,5,9:14)
knitr::kable(as.data.frame(nc)[1:7,cols])
```

## ... with coordinates
```{r, results='asis'}
cols = c(3,5,9:10,16:17)
# xy = st_coordinates((nc$geom))
nc$longitude = xy[,1]
nc$latitude = xy[,2]
knitr::kable(as.data.frame(nc)[1:7,cols])
```

## ... with POINT geometries
```{r, results='asis'}
cols = c(3,5,9:14)
nc$geometry = format(pts)
cols = c(3,5,9:10,ncol(nc))
knitr::kable(as.data.frame(nc)[1:7,cols])
```

## ... with POLYGON geometries
```{r, results='asis'}
cols = c(3,5,9:14)
nc$geometry = format(nc$geom, width = 50)
cols = c(3,5,9:10,ncol(nc))
knitr::kable(as.data.frame(nc)[1:7,cols])
```


## the "shapefile" view

```{r}
plot(nc[c("SID74", "SID79")], key.pos = 4)
st_crs(nc)
```

## Coordinate reference systems

* are the "measurement units" of spatial coordinates
* relate a location to a particular reference ellipsoid ("datum") 
* may describe a 2-D projection

```{r}
knitr::include_graphics('xkcd2.png')
```
https://xkcd.com/977/

## Joining tables, spatially

options, when geometry is not a point

## Machine learning on coordinates

using coordinates as ML features, issues
